Проект по добавлению транскрипции к иностранным словам
Этот проект предназначен для автоматического добавления транскрипций к иностранным словам из Excel-файла и сохранения результатов в формате JSON. Проект поддерживает работу с разными языками, включая немецкий, французский, испанский и английский, используя комбинацию локальных словарей и онлайн-сервисов.
Описание
Проект решает задачу обогащения словаря иностранных слов транскрипциями. На входе система принимает Excel-файл со словами, обрабатывает каждое слово, находит его транскрипцию и сохраняет результаты в JSON-файл.
Основные функции:

Чтение слов из Excel-файла
Определение языка слова
Получение транскрипций из локальных словарей
Получение транскрипций через внешние API, если локальный словарь не содержит информации
Сохранение результатов в JSON-файл

Поддерживаемые языки:

Немецкий (de)
Французский (fr)
Испанский (es)
Английский (en)

Поддерживаемые источники транскрипций:

Локальные словари - автономные словари для основных языков
Forvo API - онлайн-сервис с произношениями для множества языков
Google Translate API - резервный метод получения транскрипций

Установка
Требования

Python 3.8 или новее
pip или conda
Доступ в интернет (для загрузки словарей и использования API)

Установка с помощью pip
bash# Клонирование репозитория
git clone https://github.com/yourusername/foreign-word-transcription.git
cd foreign-word-transcription

# Установка зависимостей
pip install -r requirements.txt

# Скачивание словарей (опционально)
mkdir -p data/dictionaries
# Скачивание необходимых словарей будет выполнено автоматически при первом запуске
Установка с помощью conda
bash# Клонирование репозитория
git clone https://github.com/yourusername/foreign-word-transcription.git
cd foreign-word-transcription

# Создание и активация окружения conda
conda env create -f environment.yml
conda activate word_transcription

# Скачивание словарей (опционально)
mkdir -p data/dictionaries
# Скачивание необходимых словарей будет выполнено автоматически при первом запуске
Использование
Базовое использование
Используйте bash-скрипт для простого запуска:
bash./transcribe.sh input.xlsx
Скрипт автоматически создаст виртуальное окружение, установит необходимые зависимости, загрузит словарь CC-CEDICT (если он отсутствует) и запустит процесс добавления транскрипций.
Расширенное использование
Для более тонкой настройки можно использовать Python-скрипт напрямую:
bashpython transcription_script.py input.xlsx --output-file output.json --dict-path custom_dictionary.txt
Параметры командной строки

input_file - путь к входному Excel-файлу (обязательный параметр)
--output-file - путь к выходному JSON-файлу (по умолчанию равен входному файлу с заменой расширения)
--lang-field - имя поля для кода языка (по умолчанию "language")
--char-field - имя поля с иероглифом (по умолчанию "character")
--transcription-field - имя поля для транскрипции (по умолчанию "transcription")
--dict-path - путь к словарю CC-CEDICT (по умолчанию "data/cedict_ts.u8")

Обработка Excel-файлов
Скрипт поддерживает работу с Excel-файлами в форматах .xls и .xlsx. Основной алгоритм:

Чтение Excel-файла с помощью pandas
Извлечение слов из указанной колонки
Определение языка для каждого слова
Поиск транскрипции в локальном словаре или через API
Сохранение результатов в JSON-файл

Пример структуры Excel-файла
Ожидается, что Excel-файл содержит таблицу со следующими колонками:

Колонка с номерами (индекс 0)
Колонка со словами (индекс 1)

Пример кода для работы с Excel-файлом
pythonimport pandas as pd

# Чтение Excel-файла
df = pd.read_excel('foreign_words.xlsx', sheet_name=0, engine='openpyxl')

# Получение списка слов из второй колонки (индекс 1)
words = df.iloc[start_index:end_index+1, 1].tolist()

# Получение номеров из первой колонки (индекс 0)
numbers = df.iloc[start_index:end_index+1, 0].tolist()
Структура проекта
word_transcription/
│
├── transcription_script.py   # Основной скрипт
├── excel_processor.py        # Модуль для обработки Excel-файлов
├── transcribe.sh             # Bash-скрипт для удобного запуска
├── requirements.txt          # Зависимости для pip
├── environment.yml           # Окружение для conda
│
├── data/                     # Каталог для данных
│   └── dictionaries/         # Словари для разных языков
│       ├── de_dict.json      # Немецкий словарь
│       ├── fr_dict.json      # Французский словарь
│       ├── es_dict.json      # Испанский словарь
│       └── en_dict.json      # Английский словарь
│
├── output/                   # Каталог для выходных файлов
│   └── ...                   # JSON-файлы с результатами
│
├── logs/                     # Каталог для логов
│   └── transcription.log     # Файл логов
│
└── venv/                     # Виртуальное окружение Python
Формат выходных данных
Результаты сохраняются в JSON-файл следующей структуры:
json{
    "1": {
        "word": "Schön",
        "transcription": "ʃøːn",
        "language": "de",
        "frequency": 1
    },
    "2": {
        "word": "bonjour",
        "transcription": "bɔ̃ʒuʁ",
        "language": "fr",
        "frequency": 2
    },
    "3": {
        "word": "gracias",
        "transcription": "ˈgɾa.θjas",
        "language": "es",
        "frequency": 3
    },
    "4": {
        "word": "hello",
        "transcription": "həˈloʊ",
        "language": "en",
        "frequency": 4
    }
}
Поиск и устранение неисправностей
Проблема: Транскрипция не найдена для некоторых иероглифов
Решение:

Проверьте наличие и актуальность словаря CC-CEDICT
Убедитесь, что у вас есть доступ в интернет для использования API
Проверьте ограничения API (некоторые API могут иметь ограничения на количество запросов)

Проблема: Ошибки при чтении Excel-файла
Решение:

Убедитесь, что Excel-файл имеет ожидаемую структуру
Проверьте, что у вас установлены необходимые зависимости для работы с Excel (xlrd для .xls, openpyxl для .xlsx)
Проверьте кодировку файла

Лицензия
MIT
Авторы
Anton Mikhalev  
[@Anton_Mikhalev](https://t.me/Anton_Mikhalev)  
anton.v.mikhalev@gmail.com
