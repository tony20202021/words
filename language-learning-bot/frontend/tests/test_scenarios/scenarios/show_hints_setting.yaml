name: Show Hints Setting Test
user_id: 123456789
api_mock: study
auto_setup: true
steps:
  # –®–∞–≥ 1: –í—ã–±–∏—Ä–∞–µ–º —è–∑—ã–∫
  - type: command
    name: language
    asserts:
      - type: message_contains
        text: "–î–æ—Å—Ç—É–ø–Ω—ã–µ —è–∑—ã–∫–∏ –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è"
      - type: state_contains
        data: ["_state", None]
      - type: keyboard_contains
        button_text: "–ê–Ω–≥–ª–∏–π—Å–∫–∏–π (English)"

  # –®–∞–≥ 2: –í—ã–±–∏—Ä–∞–µ–º –∞–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫
  - type: callback
    data: "lang_select_eng"
    asserts:
      - type: message_contains
        text: "–í—ã –≤—ã–±—Ä–∞–ª–∏ —è–∑—ã–∫"
      - type: message_contains
        text: "–ê–Ω–≥–ª–∏–π—Å–∫–∏–π"
      - type: state_contains
        data: ["_state", None]
      - type: state_contains
        data: ["current_language", {"id": "eng", "name_ru": "–ê–Ω–≥–ª–∏–π—Å–∫–∏–π", "name_foreign": "English"}]

  # –®–∞–≥ 3: –û—Ç–∫—Ä—ã–≤–∞–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
  - type: command
    name: settings
    asserts:
      - type: message_contains
        text: "–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞ –æ–±—É—á–µ–Ω–∏—è"
      - type: message_contains
        text: "–û—Ç–æ–±—Ä–∞–∂–∞—Ç—å –ø–æ–¥—Å–∫–∞–∑–∫–∏: <b>–î–∞ ‚úÖ</b>"
      - type: keyboard_contains
        button_text: "üí° –ü–æ–¥—Å–∫–∞–∑–∫–∏: —Å–º–µ–Ω–∏—Ç—å –Ω–∞ \"–ü—Ä–æ–ø—É—Å–∫–∞—Ç—å\""
      - type: state_contains
        data: ["_state", None]
      - type: state_contains
        data: ["show_hints", true]

  # –®–∞–≥ 4: –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ–¥—Å–∫–∞–∑–æ–∫ (–≤—ã–∫–ª—é—á–∞–µ–º)
  - type: callback
    data: "settings_toggle_show_hints"
    asserts:
      - type: message_contains
        text: "‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω—ã"
      - type: message_contains
        text: "–û—Ç–æ–±—Ä–∞–∂–∞—Ç—å –ø–æ–¥—Å–∫–∞–∑–∫–∏: <b>–ù–µ—Ç ‚ùå</b>"
      - type: keyboard_contains
        button_text: "üí° –ü–æ–¥—Å–∫–∞–∑–∫–∏: —Å–º–µ–Ω–∏—Ç—å –Ω–∞ \"–ü—Ä–∏–¥—É–º—ã–≤–∞—Ç—å\""
      - type: state_contains
        data: ["show_hints", false]

  # –®–∞–≥ 5: –ó–∞–ø—É—Å–∫–∞–µ–º –∏–∑—É—á–µ–Ω–∏–µ —Å–ª–æ–≤ —Å –≤—ã–∫–ª—é—á–µ–Ω–Ω—ã–º–∏ –ø–æ–¥—Å–∫–∞–∑–∫–∞–º–∏
  - type: command
    name: study
    asserts:
      - type: message_contains
        position: -2
        text: "–ù–∞—á–∏–Ω–∞–µ–º –∏–∑—É—á–µ–Ω–∏–µ —Å–ª–æ–≤"
      - type: message_contains
        position: -1
        text: "–ü–µ—Ä–µ–≤–µ–¥–∏—Ç–µ –Ω–∞"
      - type: keyboard_not_contains
        button_text: "–§–æ–Ω–µ—Ç–∏–∫–∞"
      - type: keyboard_not_contains
        button_text: "–ê—Å—Å–æ—Ü–∏–∞—Ü–∏—è"
      - type: keyboard_contains
        button_text: "‚úÖ –Ø –∑–Ω–∞—é —ç—Ç–æ —Å–ª–æ–≤–æ"
      - type: keyboard_contains
        button_text: "‚ùì –ù–µ –∑–Ω–∞—é"
      - type: keyboard_contains
        button_text: "‚è© –§–ª–∞–≥: —Å–º–µ–Ω–∏—Ç—å –Ω–∞"
      - type: keyboard_button_count
        count: 3  # –¢–æ–ª—å–∫–æ 3 –∫–Ω–æ–ø–∫–∏ –±–µ–∑ –ø–æ–¥—Å–∫–∞–∑–æ–∫

  # –®–∞–≥ 6: –í–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º
  - type: command
    name: settings
    asserts:
      - type: message_contains
        text: "–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞ –æ–±—É—á–µ–Ω–∏—è"
      - type: message_contains
        text: "–û—Ç–æ–±—Ä–∞–∂–∞—Ç—å –ø–æ–¥—Å–∫–∞–∑–∫–∏: <b>–ù–µ—Ç ‚ùå</b>"
      - type: keyboard_contains
        button_text: "üí° –ü–æ–¥—Å–∫–∞–∑–∫–∏: —Å–º–µ–Ω–∏—Ç—å –Ω–∞ \"–ü—Ä–∏–¥—É–º—ã–≤–∞—Ç—å\""
      - type: state_contains
        data: ["show_hints", false]

  # –®–∞–≥ 7: –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ–¥—Å–∫–∞–∑–æ–∫ (–≤–∫–ª—é—á–∞–µ–º)
  - type: callback
    data: "settings_toggle_show_hints"
    asserts:
      - type: message_contains
        text: "‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω—ã"
      - type: message_contains
        text: "–û—Ç–æ–±—Ä–∞–∂–∞—Ç—å –ø–æ–¥—Å–∫–∞–∑–∫–∏: <b>–î–∞ ‚úÖ</b>"
      - type: keyboard_contains
        button_text: "üí° –ü–æ–¥—Å–∫–∞–∑–∫–∏: —Å–º–µ–Ω–∏—Ç—å –Ω–∞ \"–ü—Ä–æ–ø—É—Å–∫–∞—Ç—å\""
      - type: state_contains
        data: ["show_hints", true]

  # –®–∞–≥ 8: –ó–∞–ø—É—Å–∫–∞–µ–º –∏–∑—É—á–µ–Ω–∏–µ —Å–ª–æ–≤ —Å –≤–∫–ª—é—á–µ–Ω–Ω—ã–º–∏ –ø–æ–¥—Å–∫–∞–∑–∫–∞–º–∏
  - type: command
    name: study
    asserts:
      - type: message_contains
        position: -2
        text: "–ù–∞—á–∏–Ω–∞–µ–º –∏–∑—É—á–µ–Ω–∏–µ —Å–ª–æ–≤"
      - type: message_contains
        position: -1
        text: "–ü–µ—Ä–µ–≤–µ–¥–∏—Ç–µ –Ω–∞"
      - type: keyboard_contains
        button_text: "–§–æ–Ω–µ—Ç–∏—á–µ—Å–∫–æ–µ –∑–≤—É—á–∞–Ω–∏–µ (–æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç)"
      - type: keyboard_contains
        button_text: "–ê—Å—Å–æ—Ü–∏–∞—Ü–∏—è –¥–ª—è –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞ —Ä—É—Å—Å–∫–æ–º (–æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç)"
      - type: keyboard_contains
        button_text: "‚úÖ –Ø –∑–Ω–∞—é —ç—Ç–æ —Å–ª–æ–≤–æ"
      - type: keyboard_contains
        button_text: "‚ùì –ù–µ –∑–Ω–∞—é"
      - type: keyboard_button_count
        count: 7  # 4 –∫–Ω–æ–ø–∫–∏ –ø–æ–¥—Å–∫–∞–∑–æ–∫ + 3 –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–Ω–æ–ø–∫–∏
        