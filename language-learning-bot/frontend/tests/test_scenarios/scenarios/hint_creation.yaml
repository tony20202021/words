name: Create and Edit Hint Scenario
user_id: 123456789
api_mock: study
auto_setup: true
steps:
  # –®–∞–≥ 1-3: –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —à–∞–≥–∏ –¥–ª—è –≤—ã–±–æ—Ä–∞ —è–∑—ã–∫–∞ –∏ –Ω–∞—á–∞–ª–∞ –∏–∑—É—á–µ–Ω–∏—è
  - type: command
    name: language
    asserts:
      - type: message_contains
        text: "–î–æ—Å—Ç—É–ø–Ω—ã–µ —è–∑—ã–∫–∏ –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è"
      - type: message_contains
        text: "–í—ã–±–µ—Ä–∏—Ç–µ —è–∑—ã–∫ —Å –ø–æ–º–æ—â—å—é –∫–Ω–æ–ø–æ–∫ –Ω–∏–∂–µ"
      - type: state_contains
        data: ["_state", UserStates:selecting_language]
      - type: keyboard_contains
        button_text: "–ê–Ω–≥–ª–∏–π—Å–∫–∏–π"
      - type: keyboard_contains
        button_text: "–§—Ä–∞–Ω—Ü—É–∑—Å–∫–∏–π"
      - type: keyboard_button_count
        count: 2

  - type: callback
    data: "lang_select_eng"
    asserts:
      - type: message_contains
        text: "–í—ã –≤—ã–±—Ä–∞–ª–∏ —è–∑—ã–∫"
      - type: message_contains
        text: "–ê–Ω–≥–ª–∏–π—Å–∫–∏–π"
      - type: message_contains
        text: "–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ"
      - type: message_contains
        text: "–ù–∞—á–∞—Ç—å –∏–∑—É—á–µ–Ω–∏–µ: /study"
      - type: state_contains
        data: ["_state", None]

  - type: command
    name: study
    asserts:
      - type: message_contains
        position: -4
        text: "–ó–∞–≥—Ä—É–∂–∞–µ–º —Å–ª–æ–≤–∞..."
      - type: message_contains
        position: -3
        text: "batch_requested_count=100"
      - type: message_contains
        position: -2
        text: "–ù–∞—á–∏–Ω–∞–µ–º –∏–∑—É—á–µ–Ω–∏–µ —è–∑—ã–∫–∞"
      - type: message_contains
        position: -1
        text: "–°–ª–æ–≤–æ –Ω–æ–º–µ—Ä"
      - type: message_contains
        position: -1
        text: "–°–ª–æ–≤–æ –Ω–∞ —Ä—É—Å—Å–∫–æ–º"
      - type: state_contains
        data: ["_state", StudyStates:studying]
      # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –ø–æ–¥—Å–∫–∞–∑–æ–∫
      - type: keyboard_contains
        button_text: "üß† (—Ä—É—Å): ‚ûï"
      - type: keyboard_contains
        button_text: "üí° (—Ñ–æ–Ω–µ—Ç–∏–∫): ‚ûï"
      - type: keyboard_contains
        button_text: "üéµ (–∑–≤—É–∫): ‚ûï"
      - type: keyboard_contains
        button_text: "‚úçÔ∏è (–∑–∞–ø–∏—Å—å): ‚ûï"
      - type: keyboard_button_count
        count: 7

  # –®–∞–≥ 4: –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—É—é –ø–æ–¥—Å–∫–∞–∑–∫—É –∞—Å—Å–æ—Ü–∏–∞—Ü–∏–∏
  - type: callback
    data: "hint_create_phoneticassociation_word123"
    asserts:
      - type: message_contains
        text: "–°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏ —Ç–∏–ø–∞ ¬´–ê—Å—Å–æ—Ü–∏–∞—Ü–∏—è –¥–ª—è —Ñ–æ–Ω–µ—Ç–∏–∫–∏¬ª"
      - type: state_contains
        data: ["_state", HintStates:creating]

  # –®–∞–≥ 5: –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç –ø–æ–¥—Å–∫–∞–∑–∫–∏
  - type: message
    text: "–ú–æ—è —Ç–µ—Å—Ç–æ–≤–∞—è –∞—Å—Å–æ—Ü–∏–∞—Ü–∏—è"
    asserts:
      - type: message_contains
        position: -2
        text: "–ü–æ–¥—Å–∫–∞–∑–∫–∞ ¬´–ê—Å—Å–æ—Ü–∏–∞—Ü–∏—è –¥–ª—è —Ñ–æ–Ω–µ—Ç–∏–∫–∏¬ª —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞"
      - type: message_contains
        position: -2
        text: "–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º –∏–∑—É—á–µ–Ω–∏–µ —Å–ª–æ–≤"
      - type: message_contains
        position: -1
        text: "–ü–æ–¥—Å–∫–∞–∑–∫–∏"
      - type: message_contains
        position: -1
        text: "<b>(—Ñ–æ–Ω–µ—Ç–∏–∫):</b>"
      - type: message_contains
        position: -1
        text: "–ú–æ—è —Ç–µ—Å—Ç–æ–≤–∞—è –∞—Å—Å–æ—Ü–∏–∞—Ü–∏—è"
      - type: state_contains
        data: ["_state", StudyStates:studying]
      # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –ø–æ–¥—Å–∫–∞–∑–æ–∫
      - type: keyboard_contains
        button_text: "(—Ä—É—Å): ‚ûï"
      - type: keyboard_contains
        button_text: "‚úì üí° (—Ñ–æ–Ω–µ—Ç–∏–∫): ‚úèÔ∏è"
      - type: keyboard_contains
        button_text: "üéµ (–∑–≤—É–∫): ‚ûï"
      - type: keyboard_contains
        button_text: "‚úçÔ∏è (–∑–∞–ø–∏—Å—å): ‚ûï"
      - type: keyboard_button_count
        count: 7

  # –®–∞–≥ 8: –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º —Å–æ–∑–¥–∞–Ω–Ω—É—é –ø–æ–¥—Å–∫–∞–∑–∫—É
  - type: callback
    data: "hint_edit_phoneticassociation_word123"
    asserts:
      - type: message_contains
        position: -1
        text: "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏"
      - type: message_contains
        position: -1
        text: "–ê—Å—Å–æ—Ü–∏–∞—Ü–∏—è –¥–ª—è —Ñ–æ–Ω–µ—Ç–∏–∫–∏"
      - type: message_contains
        position: -1
        text: "–ú–æ—è —Ç–µ—Å—Ç–æ–≤–∞—è –∞—Å—Å–æ—Ü–∏–∞—Ü–∏—è"
      - type: message_contains
        position: -1
        text: "–ù–∞–∂–º–∏—Ç–µ –Ω–∞ —Ç–µ–∫—Å—Ç –≤—ã—à–µ, —á—Ç–æ–±—ã —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å"
      - type: state_contains
        data: ["_state", HintStates:editing]
      - type: state_contains
        data: ["hint_state", {"hint_key": "hint_phoneticassociation"}]

  # –®–∞–≥ 9: –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–π —Ç–µ–∫—Å—Ç
  - type: message
    text: "–û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –∞—Å—Å–æ—Ü–∏–∞—Ü–∏—è"
    asserts:
      - type: message_contains
        position: -2
        text: "–ü–æ–¥—Å–∫–∞–∑–∫–∞ ¬´–ê—Å—Å–æ—Ü–∏–∞—Ü–∏—è –¥–ª—è —Ñ–æ–Ω–µ—Ç–∏–∫–∏¬ª —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∞"
      - type: state_contains
        data: ["_state", StudyStates:studying]
      # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –ø–æ–¥—Å–∫–∞–∑–æ–∫
      - type: keyboard_contains
        button_text: "(—Ä—É—Å): ‚ûï"
      - type: keyboard_contains
        button_text: "‚úì üí° (—Ñ–æ–Ω–µ—Ç–∏–∫): ‚úèÔ∏è"
      - type: keyboard_contains
        button_text: "üéµ (–∑–≤—É–∫): ‚ûï"
      - type: keyboard_contains
        button_text: "‚úçÔ∏è (–∑–∞–ø–∏—Å—å): ‚ûï"
      - type: keyboard_button_count
        count: 7
