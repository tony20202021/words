name: Study Word Learning Scenario
user_id: 123456789
api_mock: study
auto_setup: true
steps:
  # –®–∞–≥ 1: –í—ã–±–∏—Ä–∞–µ–º —è–∑—ã–∫
  - type: command
    name: language
    asserts:
      - type: message_contains
        text: "–î–æ—Å—Ç—É–ø–Ω—ã–µ —è–∑—ã–∫–∏ –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è"
      - type: message_contains
        text: "–í—ã–±–µ—Ä–∏—Ç–µ —è–∑—ã–∫ —Å –ø–æ–º–æ—â—å—é –∫–Ω–æ–ø–æ–∫ –Ω–∏–∂–µ"
      - type: state_contains
        data: ["_state", None]
      - type: keyboard_contains
        button_text: "–ê–Ω–≥–ª–∏–π—Å–∫–∏–π"
      - type: keyboard_contains
        button_text: "–§—Ä–∞–Ω—Ü—É–∑—Å–∫–∏–π"
      - type: keyboard_button_count
        count: 2

  # –®–∞–≥ 2: –í—ã–±–∏—Ä–∞–µ–º –∞–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫
  - type: callback
    data: "lang_select_eng"
    asserts:
      - type: message_contains
        text: "–í—ã –≤—ã–±—Ä–∞–ª–∏ —è–∑—ã–∫"
      - type: message_contains
        text: "–ê–Ω–≥–ª–∏–π—Å–∫–∏–π"
      - type: message_contains
        text: "–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ"
      - type: message_contains
        text: "–ù–∞—á–∞—Ç—å –∏–∑—É—á–µ–Ω–∏–µ —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã /study"
      - type: state_contains
        data: ["_state", None]
      - type: state_contains
        data: ["current_language", {"id": "eng", "name_ru": "–ê–Ω–≥–ª–∏–π—Å–∫–∏–π", "name_foreign": "English"}]

  # –®–∞–≥ 3: –ó–∞–ø—É—Å–∫–∞–µ–º –∏–∑—É—á–µ–Ω–∏–µ —Å–ª–æ–≤
  - type: command
    name: study
    asserts:
      - type: message_contains
        position: -2
        text: "–ù–∞—á–∏–Ω–∞–µ–º –∏–∑—É—á–µ–Ω–∏–µ —Å–ª–æ–≤"
      - type: message_contains
        position: -2
        text: "–ü–æ–ª—É—á–∞—é —Å–ø–∏—Å–æ–∫ —Å–ª–æ–≤"
      - type: message_contains
        position: -1
        text: "–ü–µ—Ä–µ–≤–µ–¥–∏—Ç–µ –Ω–∞"
      - type: state_contains
        data: ["_state", <State 'StudyStates:studying'>]
      - type: keyboard_contains
        button_text: "‚úÖ –Ø –∑–Ω–∞—é —ç—Ç–æ —Å–ª–æ–≤–æ"
      - type: keyboard_contains
        button_text: "‚ùì –ù–µ –∑–Ω–∞—é"
      - type: keyboard_contains
        button_text: "–ê—Å—Å–æ—Ü–∏–∞—Ü–∏—è –¥–ª—è"
      - type: keyboard_button_count
        count: 7

  # –®–∞–≥ 4: –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–ª–æ–≤–æ
  # TODO –≤—ã–¥–∞–µ—Ç—Å—è –≤ –ª–æ–≥ app.utils.word_data_utils - WARNING - [word_data_utils.py:152] - Failed to get show_debug setting: 'NoneType' object has no attribute 'get_data'
  # –≤–º–µ—Å—Ç–æ word_data_utils - –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –º–æ–∫–∏
  # –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è - —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—Ç—å –≤—Å–µ –æ—Å—Ç–∞–≤—à–∏–∫–µ—Å—è —à–∞–≥–∏
  # - type: callback
  #   data: "show_word"
  #   asserts:
  #     - type: message_contains
  #       text: "–°–ª–æ–≤–æ: <code>house</code>"
  #     - type: message_contains
  #       text: "–¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è: <b>[ha äs]</b>"
  #     - type: state_contains
  #       data: ["_state", <State 'StudyStates:studying'>]
  #     - type: state_contains
  #       data: ["word_shown", true]
  #     - type: keyboard_contains
  #       button_text: "‚û°Ô∏è –°–ª–µ–¥—É—é—â–µ–µ —Å–ª–æ–≤–æ"
  #     - type: keyboard_not_contains
  #       button_text: "‚úÖ –Ø –∑–Ω–∞—é —ç—Ç–æ —Å–ª–æ–≤–æ"

  # # –®–∞–≥ 5: –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —Å–ª–æ–≤—É
  # - type: callback
  #   data: "next_word"
  #   asserts:
  #     - type: message_contains
  #       text: "üîÑ –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —Å–ª–æ–≤—É"
  #     - type: message_contains
  #       text: "–ü–µ—Ä–µ–≤–µ–¥–∏—Ç–µ –Ω–∞"
  #     - type: state_contains
  #       data: ["_state", <State 'StudyStates:studying'>]
  #     - type: state_contains
  #       data: ["word_shown", false]
  #     - type: keyboard_contains
  #       button_text: "‚úÖ –Ø –∑–Ω–∞—é —ç—Ç–æ —Å–ª–æ–≤–æ"
  #     - type: keyboard_contains
  #       button_text: "‚ùì –ù–µ –∑–Ω–∞—é"

  # # –®–∞–≥ 6: –û—Ç–º–µ—á–∞–µ–º —Å–ª–æ–≤–æ –∫–∞–∫ –∏–∑–≤–µ—Å—Ç–Ω–æ–µ
  # - type: callback
  #   data: "word_know"
  #   asserts:
  #     - type: message_contains
  #       text: "‚úÖ –û—Ç–ª–∏—á–Ω–æ!"
  #     - type: message_contains
  #       text: "–í—ã –∑–Ω–∞–µ—Ç–µ —ç—Ç–æ —Å–ª–æ–≤–æ"
  #     - type: message_contains
  #       text: "–°–ª–æ–≤–æ: <code>car</code>"
  #     - type: message_contains
  #       text: "–¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è: <b>[k…ër]</b>"
  #     - type: keyboard_contains
  #       button_text: "‚úÖ –ö —Å–ª–µ–¥—É—é—â–µ–º—É —Å–ª–æ–≤—É"
  #     - type: keyboard_contains
  #       button_text: "‚ùå –û–π, –≤—Å–µ-—Ç–∞–∫–∏ –Ω–µ –∑–Ω–∞—é"

  # # –®–∞–≥ 7: –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ–º –ø–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —Å–ª–æ–≤—É
  # - type: callback
  #   data: "confirm_next_word"
  #   asserts:
  #     - type: message_contains
  #       text: "üîÑ –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —Å–ª–æ–≤—É"
  #     - type: message_contains
  #       text: "–ü–µ—Ä–µ–≤–µ–¥–∏—Ç–µ –Ω–∞"
  #     - type: state_contains
  #       data: ["_state", <State 'StudyStates:studying'>]
  #     - type: state_contains
  #       data: ["pending_word_know", false]
  #     - type: keyboard_contains
  #       button_text: "‚úÖ –Ø –∑–Ω–∞—é —ç—Ç–æ —Å–ª–æ–≤–æ"

  # # –®–∞–≥ 8: –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º —Å—Ç–∞—Ç—É—Å –ø—Ä–æ–ø—É—Å–∫–∞ —Å–ª–æ–≤–∞
  # - type: callback
  #   data: "toggle_word_skip"
  #   asserts:
  #     - type: message_contains
  #       text: "–°—Ç–∞—Ç—É—Å –∏–∑–º–µ–Ω–µ–Ω: —Å–ª–æ–≤–æ —Ç–µ–ø–µ—Ä—å –±—É–¥–µ—Ç –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å—Å—è –≤ –±—É–¥—É—â–µ–º"
  #     - type: message_contains
  #       text: "–°–ª–æ–≤–æ: <b>"
  #     - type: state_contains
  #       data: ["_state", <State 'StudyStates:studying'>]
        