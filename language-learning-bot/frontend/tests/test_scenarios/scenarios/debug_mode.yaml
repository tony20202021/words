name: Debug Mode Test
user_id: 123456789
api_mock: study
auto_setup: true
steps:
  # –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞: –≤—ã–±–∏—Ä–∞–µ–º —è–∑—ã–∫
  - type: command
    name: language
    asserts:
      - type: message_contains
        text: "–î–æ—Å—Ç—É–ø–Ω—ã–µ —è–∑—ã–∫–∏ –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è"
      - type: state_contains
        data: ["_state", None]
      - type: keyboard_contains
        button_text: "–ê–Ω–≥–ª–∏–π—Å–∫–∏–π"
      - type: keyboard_contains
        button_text: "–§—Ä–∞–Ω—Ü—É–∑—Å–∫–∏–π"
      - type: keyboard_button_count
        count: 2

  - type: callback
    data: "lang_select_eng"
    asserts:
      - type: message_contains
        text: "–í—ã –≤—ã–±—Ä–∞–ª–∏ —è–∑—ã–∫"
      - type: message_contains
        text: "–ê–Ω–≥–ª–∏–π—Å–∫–∏–π"
      - type: message_contains
        text: "–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ"
      - type: message_contains
        text: "–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –æ–±—É—á–µ–Ω–∏—è —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã /settings"
      - type: state_contains
        data: ["_state", None]

  # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Ç–ª–∞–¥–æ—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
  - type: command
    name: settings
    asserts:
      - type: message_contains
        text: "–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞ –æ–±—É—á–µ–Ω–∏—è"
      - type: message_contains
        text: "–û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è: <b>–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å ‚úÖ</b>" # TODO –∏—Å–ø—Ä–∞–≤–∏—Ç—å –º–æ–∫ - –¥–æ–ª–¥–∂–Ω–æ –±—ã—Ç—å –≤ –Ω–∞—á–∞–ª–µ "–ø—Ä–æ–ø—É—Å–∫–∞—Ç—å"
      - type: state_contains
        data: ["_state", None]
      # TODO –∏—Å–ø—Ä–∞–≤–∏—Ç—å –º–æ–∫
      # - type: state_contains
      #   data: ["show_debug", true]
      # —Å–µ–π—á–∞—Å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫
        # 'show_debug': <MagicMock name='mock.bot.api_client.get_user_language_settings().__getitem__().get()' id='140172775259104'>
      - type: keyboard_contains
        button_text: "–ò–∑–º–µ–Ω–∏—Ç—å –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–ª–æ–≤–æ"
      - type: keyboard_contains
        button_text: "–ü–æ–º–µ—á–µ–Ω–Ω—ã–µ —Å–ª–æ–≤–∞"
      - type: keyboard_contains
        button_text: "–ü–µ—Ä–∏–æ–¥ –ø—Ä–æ–≤–µ—Ä–∫–∏"
      - type: keyboard_contains
        button_text: "–ü–æ–¥—Å–∫–∞–∑–∫–∏"
      - type: keyboard_contains
        button_text: "–û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è"
      - type: keyboard_button_count
        count: 5
      # TODO –∏—Å–ø—Ä–∞–≤–∏—Ç—å –º–æ–∫
      # —Å–µ–π—á–∞—Å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫
      # –ù–∞—á–∞–ª—å–Ω–æ–µ —Å–ª–æ–≤–æ: <b><MagicMock name='mock.bot.api_client.get_user_language_settings().__getitem__().get()' id='140071049983312'></b>

  # –í–∫–ª—é—á–∞–µ–º –æ—Ç–ª–∞–¥–æ—á–Ω—ã–π —Ä–µ–∂–∏–º
  - type: callback
    data: "settings_toggle_show_debug"
    asserts:
      - type: message_contains
        text: "–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞ –æ–±—É—á–µ–Ω–∏—è" # TODO –Ω–∞–π—Ç–∏ –æ—à–∏–±–∫—É - –¥–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å"‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω—ã"
      - type: message_contains
        text: "–û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è: <b>–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å ‚úÖ</b>"   # TODO –∏—Å–ø—Ä–∞–≤–∏—Ç—å –º–æ–∫ - –ø–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è - —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–æ–ª–¥–∂–Ω–æ –º–µ–Ω—è—Ç—å—Å—è
      - type: message_contains
        text: "–î—Ä—É–≥–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã"
      - type: message_contains
        text: "/study - –ù–∞—á–∞—Ç—å –∏–∑—É—á–µ–Ω–∏–µ —Å–ª–æ–≤"
      # - type: state_contains
        # data: ["show_debug", true]
      # TODO –∏—Å–ø—Ä–∞–≤–∏—Ç—å –º–æ–∫
      # —Å–µ–π—á–∞—Å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫
      # 'show_debug': <MagicMock name='mock.bot.api_client.get_user_language_settings().__getitem__().__getitem__()' id='139683105014160'>
      - type: state_contains
        data: ["_state", None]
      - type: keyboard_contains
        button_text: "üîç –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è: —Å–º–µ–Ω–∏—Ç—å –Ω–∞ \"–°–∫—Ä—ã–≤–∞—Ç—å\""  # TODO –∏—Å–ø—Ä–∞–≤–∏—Ç—å –º–æ–∫ - –ø–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è - –∫–Ω–æ–ø–∫–∞ –¥–æ–ª–¥–∂–Ω–∞ –º–µ–Ω—è—Ç—å—Å—è
        #  TODO –ø–µ—Ä–µ—á–∏—Å–ª–∏—Ç—å –≤—Å–µ –∫–Ω–æ–ø–∫–∏
      - type: keyboard_button_count
        count: 5

  # –ó–∞–ø—É—Å–∫–∞–µ–º –∏–∑—É—á–µ–Ω–∏–µ —Å –æ—Ç–ª–∞–¥–æ—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
  - type: command
    name: study
    asserts:
      - type: message_contains
        position: -2
        text: "–ù–∞—á–∏–Ω–∞–µ–º –∏–∑—É—á–µ–Ω–∏–µ —Å–ª–æ–≤ —è–∑—ã–∫–∞"
      - type: message_contains
        position: -2
        text: "–ü–æ–ª—É—á–∞—é —Å–ø–∏—Å–æ–∫ —Å–ª–æ–≤"
      - type: message_contains
        position: -1
        text: "–ü–µ—Ä–µ–≤–µ–¥–∏—Ç–µ –Ω–∞"
      - type: message_contains
        position: -1
        text: "–û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:"
      - type: message_contains
        position: -1
        text: "ID —Å–ª–æ–≤–∞:"
      - type: message_contains
        position: -1
        text: "ID —è–∑—ã–∫–∞:"
      - type: state_contains
        data: ["_state", <State 'StudyStates:studying'>]
        #  TODO –ø–µ—Ä–µ—á–∏—Å–ª–∏—Ç—å –≤—Å–µ –∫–Ω–æ–ø–∫–∏
      - type: keyboard_button_count
        count: 7

  # –í—ã–∫–ª—é—á–∞–µ–º –æ—Ç–ª–∞–¥–æ—á–Ω—ã–π —Ä–µ–∂–∏–º
  - type: command
    name: settings
    asserts:
      - type: message_contains
        text: "–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞ –æ–±—É—á–µ–Ω–∏—è"
      - type: state_contains
        data: ["_state", "<State 'StudyStates:studying'>"] # TODO –∏—Å–ø—Ä–∞–≤–∏—Ç—å –≤ –∫–æ–¥–µ —Å–∞–º–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ - —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–æ–ª–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å—Å—è –Ω–∞ None
        #  TODO –ø–µ—Ä–µ—á–∏—Å–ª–∏—Ç—å –≤—Å–µ –∫–Ω–æ–ø–∫–∏
      - type: keyboard_button_count
        count: 5

  - type: callback
    data: "settings_toggle_show_debug"
    asserts:
      - type: message_contains
        text: "–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞ –æ–±—É—á–µ–Ω–∏—è"  # TODO –Ω–∞–π—Ç–∏ –æ—à–∏–±–∫—É - –¥–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å"‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω—ã"
      - type: message_contains
        text: "–û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è: <b>–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å" # TODO –∏—Å–ø—Ä–∞–≤–∏—Ç—å –º–æ–∫ - –ø–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è - –¥–æ–ª–¥–∂–Ω–∞ –º–µ–Ω—è—Ç—å—Å—è
      - type: message_contains
        text: "–î—Ä—É–≥–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã"
      - type: message_contains
        text: "/study - –ù–∞—á–∞—Ç—å –∏–∑—É—á–µ–Ω–∏–µ —Å–ª–æ–≤"
      # - type: state_contains
      #   data: ["show_debug", false]
      # TODO –∏—Å–ø—Ä–∞–≤–∏—Ç—å –º–æ–∫
      # —Å–µ–π—á–∞—Å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫
      # 'show_debug': <MagicMock name='mock.bot.api_client.get_user_language_settings().__getitem__().__getitem__()' id='139683105014160'>
        #  TODO –ø–µ—Ä–µ—á–∏—Å–ª–∏—Ç—å –≤—Å–µ –∫–Ω–æ–ø–∫–∏
      - type: keyboard_button_count
        count: 5

  # –ó–∞–ø—É—Å–∫–∞–µ–º –∏–∑—É—á–µ–Ω–∏–µ –±–µ–∑ –æ—Ç–ª–∞–¥–æ—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
  - type: command
    name: study
    asserts:
      - type: message_contains
        position: -1
        text: "–ü–µ—Ä–µ–≤–µ–¥–∏—Ç–µ –Ω–∞"
      - type: message_not_contains
        position: -1
        text: "–û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:"  # TODO –∏—Å–ø—Ä–∞–≤–∏—Ç—å –º–æ–∫ - –ø–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è - –¥–æ–ª–¥–∂–Ω–∞ –º–µ–Ω—è—Ç—å—Å—è
      - type: message_not_contains
        position: -1
        text: "ID —Å–ª–æ–≤–∞:"  # TODO –∏—Å–ø—Ä–∞–≤–∏—Ç—å –º–æ–∫ - –ø–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è - –¥–æ–ª–¥–∂–Ω–∞ –º–µ–Ω—è—Ç—å—Å—è
      - type: state_contains
        data: ["_state", <State 'StudyStates:studying'>]
        #  TODO –ø–µ—Ä–µ—á–∏—Å–ª–∏—Ç—å –≤—Å–µ –∫–Ω–æ–ø–∫–∏
      - type: keyboard_button_count
        count: 7
        