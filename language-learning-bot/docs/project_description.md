# –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ Language Learning Bot (–û–ë–ù–û–í–õ–ï–ù–û —Å AI)

## –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∏ —Ü–µ–ª–∏ –ø—Ä–æ–µ–∫—Ç–∞

Language Learning Bot - –∫–æ–º–ø–ª–µ–∫—Å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –∏–∑—É—á–µ–Ω–∏—è –∏–Ω–æ—Å—Ç—Ä–∞–Ω–Ω—ã—Ö —Å–ª–æ–≤ —Å **—Ä–µ–∞–ª—å–Ω–æ–π AI –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π**. –ü—Ä–æ–µ–∫—Ç —Ä–µ—à–∞–µ—Ç –∑–∞–¥–∞—á–∏:

- –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∏–∑—É—á–µ–Ω–∏–µ –∏–Ω–æ—Å—Ç—Ä–∞–Ω–Ω—ã—Ö —Å–ª–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä–≤–∞–ª—å–Ω–æ–≥–æ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è
- –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **üî• –†–µ–∞–ª—å–Ω–∞—è AI –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–∞–ø–∏—Å–∞–Ω–∏—è** —Å Union ControlNet
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –∏–∑—É—á–µ–Ω–∏—è
- –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏–∑ —á–µ—Ç—ã—Ä–µ—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:

### 1. MongoDB (–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö)
- –•—Ä–∞–Ω–µ–Ω–∏–µ —è–∑—ã–∫–æ–≤, —Å–ª–æ–≤, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–∑—É—á–µ–Ω–∏—è –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- **üî• –õ–æ–≥–∏ AI –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏ –∫—ç—à**
- –ü–æ—Ä—Ç: 27017

### 2. Backend API (–û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–µ—Ä)
- REST API —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã–º–∏
- –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –∏–∑—É—á–µ–Ω–∏—è
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- –ü–æ—Ä—Ç: 8500

### 3. üî• Writing Service (AI –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å)
- **–†–µ–∞–ª—å–Ω–∞—è AI –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π** 
- **Stable Diffusion XL + Union ControlNet**
- Multi-conditioning (canny, depth, segmentation, scribble)
- GPU –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏ memory management
- –ü–æ—Ä—Ç: 8600

### 4. Frontend (Telegram-–±–æ—Ç)
- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ä–µ–∞–ª—å–Ω–æ–π AI –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π**
- –°–∏—Å—Ç–µ–º–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π –∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

## –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã

1. **–†–µ–∂–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** - –∏–∑—É—á–µ–Ω–∏–µ —è–∑—ã–∫–æ–≤ —Å **AI –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏**
2. **–†–µ–∂–∏–º –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–æ–π –∏ **–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ AI**

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –ò–∑—É—á–µ–Ω–∏–µ —Å–ª–æ–≤
- –ò–Ω—Ç–µ—Ä–≤–∞–ª—å–Ω–æ–µ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ
- **üî• –†–µ–∞–ª—å–Ω–∞—è AI –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–∞–ø–∏—Å–∞–Ω–∏—è**
- –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥—Å–∫–∞–∑–æ–∫ (—Ñ–æ–Ω–µ—Ç–∏–∫–∞, –∞—Å—Å–æ—Ü–∏–∞—Ü–∏–∏, –∑–Ω–∞—á–µ–Ω–∏–µ, –Ω–∞–ø–∏—Å–∞–Ω–∏–µ)
- –û—Ü–µ–Ω–∫–∞ –∑–Ω–∞–Ω–∏–π –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å

### üî• AI –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- **4 —Ç–∏–ø–∞ conditioning** (canny, depth, segmentation, scribble)
- **GPU –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è** –ø–æ–¥ —Ä–∞–∑–Ω—ã–µ –∫–∞—Ä—Ç—ã (12GB-80GB)

### –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —è–∑—ã–∫–∞
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥—Å–∫–∞–∑–∫–∞–º–∏

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º
- –°–æ–∑–¥–∞–Ω–∏–µ/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —è–∑—ã–∫–æ–≤
- –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–æ–≤ —Å–ª–æ–≤
- –ü–æ–∏—Å–∫ –ø–æ —á–∞—Å—Ç–æ—Ç–Ω—ã–º —Å–ø–∏—Å–∫–∞–º

### üî• AI –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- **–°—Ç–∞—Ç—É—Å AI –º–æ–¥–µ–ª–µ–π –∏ GPU**
- **Performance –º–µ—Ç—Ä–∏–∫–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏**
- **Memory usage –∏ optimization**
- **Health checks AI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤**

### –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- **Python 3.8+** - —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è
- **Telegram Bot API** - –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è
- **MongoDB** - –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **FastAPI** - backend API
- **Aiogram 3.x** - frontend framework

### üî• AI —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
```
AI Models:
‚îú‚îÄ‚îÄ Stable Diffusion XL Base 1.0      # –û—Å–Ω–æ–≤–Ω–∞—è –º–æ–¥–µ–ª—å
‚îú‚îÄ‚îÄ Union ControlNet SDXL 1.0          # ControlNet –º–æ–¥–µ–ª—å
‚îî‚îÄ‚îÄ Optimized VAE & Scheduler          # –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

AI Frameworks:
‚îú‚îÄ‚îÄ Diffusers >= 0.25.0               # HuggingFace
‚îú‚îÄ‚îÄ Transformers >= 4.39.0            # HuggingFace  
‚îú‚îÄ‚îÄ PyTorch >= 2.1.0                  # ML framework
‚îú‚îÄ‚îÄ XFormers >= 0.0.22                # Optimization
‚îî‚îÄ‚îÄ CUDA 11.8+                        # GPU support
```

## –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏
- **languages** - –¥–æ—Å—Ç—É–ø–Ω—ã–µ —è–∑—ã–∫–∏
- **words** - —Å–ª–æ–≤–∞ —Å –ø–µ—Ä–µ–≤–æ–¥–∞–º–∏
- **users** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–∏—Å—Ç–µ–º—ã
- **user_statistics** - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–∑—É—á–µ–Ω–∏—è + **AI –≥–µ–Ω–µ—Ä–∞—Ü–∏—è**
- **user_language_settings** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ + **AI preferences**

### üî• –ù–æ–≤—ã–µ AI –∫–æ–ª–ª–µ–∫—Ü–∏–∏
- **ai_generation_logs** - –ª–æ–≥–∏ AI –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- **ai_cache** - –∫—ç—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ AI

## üî• Writing Service API

### AI Generation —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
- `POST /api/writing/generate-writing-image` - **—Ä–µ–∞–ª—å–Ω–∞—è AI –≥–µ–Ω–µ—Ä–∞—Ü–∏—è**
- `POST /api/writing/generate-writing-image-binary` - –±–∏–Ω–∞—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç
- `GET /api/writing/status` - —Å—Ç–∞—Ç—É—Å AI —Å–∏—Å—Ç–µ–º—ã

### Health Check —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã  
- `GET /health` - –±–∞–∑–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
- `GET /health/detailed` - **–¥–µ—Ç–∞–ª—å–Ω–∞—è AI –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**
- `GET /health/ready` - –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å AI –º–æ–¥–µ–ª–µ–π
- `POST /health/warmup` - **–ø—Ä–æ–≥—Ä–µ–≤ AI –º–æ–¥–µ–ª–µ–π**

### üî• AI –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- **GPU optimization** - 12GB-80GB VRAM
- **Lazy loading** - –º–æ–¥–µ–ª–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—Ä–æ—Å–µ

## –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

```
Frontend ‚Üî Backend: –û—Å–Ω–æ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (—è–∑—ã–∫–∏, —Å–ª–æ–≤–∞, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏)
Frontend ‚Üî Writing Service: AI –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
Backend ‚Üî MongoDB: –•—Ä–∞–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö
Writing Service ‚Üî GPU: –†–µ–∞–ª—å–Ω–∞—è AI –æ–±—Ä–∞–±–æ—Ç–∫–∞
```

## –°—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### üî• AI-powered –∏–∑—É—á–µ–Ω–∏–µ —Å–ª–æ–≤
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç —è–∑—ã–∫
2. –°–∏—Å—Ç–µ–º–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ª–æ–≤–æ
3. **–ó–∞–ø—Ä–æ—Å –∫ AI —Å–µ—Ä–≤–∏—Å—É –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è**
4. **–†–µ–∞–ª—å–Ω–∞—è AI –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ Union ControlNet**
5. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–∑—É—á–∞–µ—Ç —Å AI –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º
6. –û—Ü–µ–Ω–∫–∞ –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è

### –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–¥—Å–∫–∞–∑–æ–∫ —Å AI
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Å–ª–æ–≤–æ
2. **–ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç AI –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞–ø–∏—Å–∞–Ω–∏—è**
3. –°–æ–∑–¥–∞–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—É—é –ø–æ–¥—Å–∫–∞–∑–∫—É
4. –°–∏—Å—Ç–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å **AI –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏**

### üî• –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ AI
1. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å—Ç–∞—Ç—É—Å–∞ AI –º–æ–¥–µ–ª–µ–π**
2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ GPU memory usage**
3. **–ê–Ω–∞–ª–∏–∑ performance –º–µ—Ç—Ä–∏–∫**
4. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ AI cache –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è–º–∏**

## Performance —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏

### üî• AI Generation –º–µ—Ç—Ä–∏–∫–∏
```
Timing:
‚îú‚îÄ‚îÄ Cold start: ~15-30s (model loading)
‚îú‚îÄ‚îÄ Warm generation: ~8-12s (RTX 4090)
‚îî‚îÄ‚îÄ Cache hit: <1s

Memory:
‚îú‚îÄ‚îÄ Models: ~6-8GB VRAM
‚îú‚îÄ‚îÄ Generation: +2-4GB peak
‚îî‚îÄ‚îÄ Optimization: auto-scaling –ø–æ GPU
```
